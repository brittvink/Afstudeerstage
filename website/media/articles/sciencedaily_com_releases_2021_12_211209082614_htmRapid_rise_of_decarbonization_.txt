Rooftop photovoltaics (PVs) integrated with electric vehicles (EVs) has the potential to deeply decarbonize urban energy systems in a cost-effective way. The SolarEV City Concept suggested that the rooftop PV plus EV systems can supply 54-95% of electricity demand within cities in Japan, reducing CO2 emission 54-95% (Kobashi et al., Environmental Research Letters, 16, 024042,2021). However, it was not clear which district in city could consume, generate, and store the PV electricity, as each district has different load patterns, building structures, and number of parked cars. Therefore, we performed techno-economic analyses on rooftop PV systems integrated with stand-alone batteries or EVs in residential and commercial districts in Japan from 2020 to 2040. We found that rooftop PV systems in 2020 are already cost competitive relative to existing energy systems in Japan. However, "PV + EV" systems in residential houses rapidly increases its economic advantage over commercial districts due to greater rooftop space and higher number of available vehicles towards 2030. Moreover, energy sharing in the districts significantly improved the decarbonization potential. By 2025, energy cost savings, payback periods, and internal rate of return (IRR) of residential "PV + EV" systems respectively reached 23%, 9 years, and 11%, and continued improving in subsequent years. CO2 emissions from electricity and gasoline consumption was reduced by 88%, and the system was capable to supplying 89% of electricity demand. The results indicate that residential "PV + EV" systems are a potential source for significant renewable energy generation and storage that can also produce increasingly dispatchable electricity. Policy makers, industries, and communities should prepare to establish these systems through regulatory reform and demonstration projects to scale-up after 2025. 